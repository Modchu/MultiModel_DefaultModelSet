package modchu.model;import java.io.BufferedReader;import java.io.BufferedWriter;import java.io.File;import java.io.FileReader;import java.io.FileWriter;import java.lang.reflect.Field;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map.Entry;import java.util.concurrent.ConcurrentHashMap;import java.util.zip.ZipFile;import modchu.lib.Modchu_Config;import modchu.lib.Modchu_Debug;import modchu.lib.Modchu_FileManager;import modchu.lib.Modchu_Main;import modchu.lib.Modchu_Reflect;import modchu.lib.characteristic.Modchu_AS;import modchu.lib.characteristic.recompileonly.Modchu_CastHelper;import modchu.lib.characteristic.recompileonly.Modchu_ModelRenderer;import modchu.lib.replace.Modchu_ModelRendererBase;import modchu.lib.replacepoint.Modchu_ModelMultiReplacePoint;import modchu.model.multimodel.base.MultiModelAction;import modchu.model.multimodel.base.MultiModelBaseBiped;import modchu.model.multimodel.base.MultiModelCustom;import modchu.model.multimodel.base.MultiModelSkirtFloats;public class ModchuModel_CustomModel {	public Object mainModel;	public MultiModelBaseBiped baseModel;	public String mainModeltextureName;	public int mainModelDesignationColor = -1;	public Object mainModeltexture;	public HashMap<String, Modchu_ModelRenderer> partsMap = new HashMap();	public static final byte normal = 0;	public static final byte eyeR = 1;	public static final byte eyeL = 2;	public static final byte ear = 3;	public static final byte tail = 4;	public static final int maxTypeMode = 5;	public static final int maxboxType = 3;	public ArrayList<Object[]> textureAndModelRendererList = new ArrayList();	public boolean isLMMModel = false;	private boolean changeModelInit;	private boolean allRendering = false;	private boolean partsRendering = false;	private HashMap<Modchu_ModelRenderer, Boolean> showModelMemoryMap = new HashMap();	private HashMap<Modchu_ModelRenderer, Boolean> customModelShowModelMemoryMap = new HashMap();	private HashMap<Integer, Field> modelRendererFieldsMap = new HashMap();	private File cfgdir;	private static HashMap<String, Object> mainTextureMap = new HashMap();	private HashMap<String, ArrayList> textureListMap = new HashMap();	private String cfgName;	private int showArmorPartsNumber;	private int tempColor;	private boolean guiTextureSelectFlag;	private boolean colorSettingForcingFlag;	private Object tempSelectPanel;	private Object tempGuiEntitySelectEntity;	private Object currentScreen;	private boolean debug = Modchu_Debug.mDebug;	//private boolean debug = true;	private boolean memoryDebug = false;	public ModchuModel_CustomModel(MultiModelBaseBiped multiModelBaseBiped, String s, List list, float f, float f1) {		baseModel = multiModelBaseBiped;		if (s != null) {			cfgName = s;			init(s, list, f, f1);			Modchu_Debug.cDebug("ModchuModel_CustomModel init end.");		}	}	public ModchuModel_CustomModel(MultiModelBaseBiped multiModelBaseBiped, Object modelBiped, String s, float f, float f1) {		baseModel = multiModelBaseBiped;		mainModel = modelBiped;		mainModeltextureName = s;		cfgName = null;		partsRendering = false;		partsRendering = false;		isLMMModel = !Modchu_ModelMultiReplacePoint.class.isInstance(mainModel);	}	public void init(String s, List reLoadList, float f, float f1) {		boolean cfgReLoad = false;		if (s != null) ;else {			s = cfgName;			cfgReLoad = true;		}		File mcDataDir = Modchu_AS.getFile(Modchu_AS.minecraftMcDataDir);		cfgdir = new File(mcDataDir, "/config/CustomModel/");		String s1 = new StringBuilder().append("CustomModel_").append(s).append(".cfg").toString();		Modchu_Debug.cDebug("ModchuModel_CustomModel cfg["+s1+"] loadInit");		File file = new File(cfgdir, s1);		if (!file.exists()) {			Modchu_Main.runtimeExceptionFlag = true;			Modchu_Main.runtimeExceptionString = "ModchuModel_CustomModel init !file.exists() fileName="+s1;			return;		} else {			Modchu_Debug.lDebug("ModchuModel_CustomModel file.exists() ok.");		}		loadInit(file, reLoadList, cfgReLoad);		newInitSetting();		Modchu_Debug.cDebug("ModchuModel_CustomModel cfg load");		load(file, reLoadList, cfgReLoad, f, f1);		Modchu_Debug.cDebug("ModchuModel_CustomModel cfg load end");		partsRendering = true;		defaultAddChild();		//syncNameListSetting();		//PFLM_ModelData = Modchu_Reflect.loadClass(Modchu_Main.getClassName("PFLM_ModelData"));		Modchu_Debug.cDebug("ModchuModel_CustomModel init() end.");	}	public static void sampleZipCopy(Class c) {		try {			File mcDataDir = Modchu_AS.getFile(Modchu_AS.minecraftMcDataDir);			File cfgdir = new File(mcDataDir, "/config/CustomModel/");			if (!cfgdir.exists()) cfgdir.mkdir();			String s1 = new StringBuilder().append("CustomModel_1.cfg").toString();			File file = new File(cfgdir, s1);			if (file.exists()) return;			Modchu_Debug.lDebug("----------------------------------------------------");			Modchu_Debug.lDebug("ModchuModel_CustomModel CustomModel_1.cfg !file.exists()");			ZipFile zipFile = null;			File copyDir = null;			String name = "CustomModelCfg_Sample.zip";			if (Modchu_Main.isRelease()) {				if (c != null) {					zipFile = Modchu_FileManager.getZipFile(c);				} else {					File dir = new File(mcDataDir, "/mods/");					//Modchu_Debug.mDebug("ModchuModel_CustomModel dir.getAbsolutePath()="+dir.getAbsolutePath());					dir = Modchu_FileManager.getFile(dir.getAbsolutePath(), null, "MultiModelSet");					if (dir != null) zipFile = new ZipFile(dir);				}				Modchu_Debug.lDebug("ModchuModel_CustomModel zipFile="+zipFile);				if (zipFile != null) ;else return;				copyDir = new File(mcDataDir, "/config/");				if (!copyDir.exists()) return;				Modchu_Debug.lDebug("Modchu_Config copyDir="+copyDir);				Modchu_FileManager.copyZipResource(c, zipFile, name, copyDir);			} else {				try {					File dir = new File(mcDataDir, "/mods/");					//Modchu_Debug.mDebug("ModchuModel_CustomModel dir.getAbsolutePath()="+dir.getAbsolutePath());					dir = Modchu_FileManager.getFile(dir.getAbsolutePath(), null, "MultiModelSet");					if (dir != null) {						zipFile = new ZipFile(dir);						Modchu_Debug.lDebug("ModchuModel_CustomModel zipFile="+zipFile);						copyDir = new File(""+mcDataDir.toString().replace("\\.", "")+"/config/");						Modchu_Debug.lDebug("Modchu_Config copyDir="+copyDir);						Modchu_FileManager.copyZipResource(c, zipFile, name, copyDir);					} else {						Modchu_Debug.lDebug("ModchuModel_CustomModel dir == null !!");					}				} catch (Exception e) {					e.printStackTrace();				}			}		} catch(Exception e) {			e.printStackTrace();		}		Modchu_Debug.lDebug("----------------------------------------------------");	}	public void newInitSetting() {		newMainModelInit();		Modchu_Debug.cDebug("ModchuModel_CustomModel customInitModel end");	}	public void deleteParts(int i) {		if (i < 0				| i >= partsMap.size()) return;		partsMap.remove(Modchu_Main.getHashMapKey(partsMap, i));		//partsTextureAndModelRendererList		textureAndModelRendererList.remove(i);	}	public void deleteBox(int i) {		deleteBox(i, 0);	}	public void deleteBox(int i, int i2) {		if (partsMap != null				&& !partsMap.isEmpty()) ;else return;		Modchu_ModelRenderer modelRenderer = partsMap.get(Modchu_Main.getHashMapKey(partsMap, i));		if (modelRenderer != null) ;else return;		modelRenderer.removeFreeVariable("partsBoxData"+i2);		if (modelRenderer.cubeList != null				&& !modelRenderer.cubeList.isEmpty()) {			modelRenderer.cubeList.remove(i2);		}	}	public void addBox(int i) {		addBox(i, 0);	}	public void addBox(int i, int i2) {		//Modchu_Debug.mDebug("addBox i="+i+" i2="+i2);		if (partsMap != null				&& !partsMap.isEmpty()) ;else return;		Modchu_ModelRenderer modelRenderer = partsMap.get(Modchu_Main.getHashMapKey(partsMap, i));		if (modelRenderer != null) ;else return;		Object o = modelRenderer.getFreeVariable("partsBoxData"+i2);		float[] f0 = o != null				&& o instanceof float[] ? (float[])o : null;		addBox(modelRenderer, f0);	}	private void addBox(Modchu_ModelRenderer modelRenderer, float[] f0) {		addBox(modelRenderer, f0, 1.0F);	}	private void addBox(Modchu_ModelRenderer modelRenderer, float[] f0, float f) {		if (f0 != null) ;else return;		float[] f1 = copyBoxDataFloat(f0);		modelRenderer.addBox(f1[0], f1[1], f1[2], (int)f1[3], (int)f1[4], (int)f1[5], f * f1[6] + f1[7]);	}	private void addPlate(Modchu_ModelRenderer modelRenderer, float[] f0) {		addPlate(modelRenderer, f0, 1.0F);	}	private void addPlate(Modchu_ModelRenderer modelRenderer, float[] f0, float f) {		if (f0 != null) ;else return;		float[] f1 = copyBoxDataFloat(f0);		modelRenderer.addPlate(f1[0], f1[1], f1[2], (int)f1[3], (int)f1[4], (int)f1[5], f * f1[6] + f1[7]);	}	private void addBall(Modchu_ModelRenderer modelRenderer, float[] f0) {		addBall(modelRenderer, f0, 1.0F);	}	private void addBall(Modchu_ModelRenderer modelRenderer, float[] f0, float f) {		if (f0 != null) ;else return;		float[] f1 = copyBoxDataFloat(f0);		modelRenderer.addBall(f1[0], f1[1], f1[2], f1[3], f1[4], f1[5]);	}	private float[] copyBoxDataFloat(float[] f0) {		float[] f1;		if (f0.length < 8) {			f1 = new float[] {					0.0F, 0.0F, 0.0F,					1, 1, 1,					1.0F, 0.0F			};			for (int i = 0; i < f0.length; i++) {				f1[i] = f0[i];			}		} else {			f1 = f0;		}		return f1;	}	public void addParts(String s) {		if (partsMap != null				&& !partsMap.isEmpty()) ;else return;		Object model = getModel();		Modchu_ModelRenderer modelRenderer = new Modchu_ModelRenderer((Modchu_ModelMultiReplacePoint) model, s);		partsMap.put(s, modelRenderer);	}	private void partsAddChildSetting(String s, Modchu_ModelRenderer modelRenderer) {		if (s != null) {			Object model = getModel();			String addChildName = obfuscationNameCheck(s);			Modchu_ModelRenderer tempModelRenderer = (Modchu_ModelRenderer) Modchu_Reflect.getFieldObject(model.getClass(), addChildName, model, -1);			if (tempModelRenderer != null) {				tempModelRenderer.addChild(modelRenderer);				Modchu_Reflect.setFieldObject(model.getClass(), addChildName, model, tempModelRenderer);				Modchu_Debug.cDebug("ModchuModel_CustomModel "+modelRenderer.getBoxName()+" addChild s="+s);			} else {				Modchu_Debug.cDebug("ModchuModel_CustomModel addChild else");				tempModelRenderer = partsMap.get(s);				if (tempModelRenderer != null) {					tempModelRenderer.addChild(modelRenderer);					Modchu_Debug.cDebug("ModchuModel_CustomModel else "+modelRenderer.getBoxName()+" addChild s="+s);				} else {					Modchu_Debug.cDebug("ModchuModel_CustomModel addChild else null !! "+modelRenderer.getBoxName()+" s="+s);				}			}		}	}	public void render(ModchuModel_IModelCaps entityCaps, float f, float f1, float ticksExisted, float pheadYaw, float pheadPitch, float f5, boolean pIsRender) {		//Modchu_Debug.mDebug("ModchuModel_CustomModel render");		Object model = getModel();		if (model != null) ;else {			Modchu_Debug.mDebug("ModchuModel_CustomModel render else model == null !!");			return;		}		if (entityCaps != null) ;else {			Modchu_Debug.mDebug("ModchuModel_CustomModel render else entityCaps == null !!");			return;		}		//Modchu_Debug.mDebug("ModchuModel_CustomModel render model="+model);		Object entity = entityCaps.getCapsValue(entityCaps.caps_Entity);		int armorType = getArmorType();		//Modchu_Debug.mlDebug("ModchuModel_CustomModel render "+baseModel+" armorType="+armorType+" modelSize="+((MultiModelCustom) baseModel).modelSize);		currentScreen = Modchu_AS.get(Modchu_AS.minecraftCurrentScreen);		if (currentScreen == null) {			if (tempSelectPanel != null) tempSelectPanel = null;		}		boolean colorSettingFlag = mainModeltexture == null;		//Modchu_Debug.lDebug("render currentScreen="+currentScreen);		//Modchu_Debug.lDebug("render ModchuModel_Main.MMM_GuiTextureSelect="+ModchuModel_Main.MMM_GuiTextureSelect);		//Modchu_Debug.lDebug("render ModchuModel_Main.MMM_GuiTextureSelect.isInstance(currentScreen)="+ModchuModel_Main.MMM_GuiTextureSelect.isInstance(currentScreen));		Class MMM_GuiTextureSelect = Modchu_Reflect.loadClass("MMM_GuiTextureSelect");		//Modchu_Debug.mDebug("ModchuModel_CustomModel render 1");		if (MMM_GuiTextureSelect != null) {			if (MMM_GuiTextureSelect.isInstance(currentScreen)) {				colorSettingFlag = true;				guiTextureSelectFlag = true;				if (tempSelectPanel != null) ;else {					tempSelectPanel = Modchu_Reflect.getFieldObject("MMM_GuiTextureSelect", "selectPanel", currentScreen);					tempGuiEntitySelectEntity = null;				}			} else {				if (tempSelectPanel != null) tempSelectPanel = null;				if (guiTextureSelectFlag) {					colorSettingForcingFlag = true;					guiTextureSelectFlag = false;				}			}		}		//Modchu_Debug.mDebug("ModchuModel_CustomModel render 2");		colorSettingFlag = ModchuModel_ModelCapsHelper.getCapsValueByte(entityCaps, entityCaps.caps_EntityType) == entityCaps.entityType_LMM;		if (!changeModelInit) changeModel(entityCaps);		if (partsRendering) {			allShowModelMemory();			customModelShowModelMemory();			customModelShowModelSetting(entityCaps, (List)null, false);		}		if (mainModeltexture != null) ;else colorSettingForcingFlag = true;		//Modchu_Debug.lDebug("render colorSettingFlag="+colorSettingFlag);		if (colorSettingFlag) changeColor(entityCaps);		Object render = Modchu_AS.get(Modchu_AS.render, model);		if (render != null) ;else {			render = Modchu_AS.get(Modchu_AS.render, baseModel);			if (render != null) ;else render = entity != null ? Modchu_AS.get(Modchu_AS.renderManagerGetEntityRenderObject, entity) : null;			if (render != null) Modchu_AS.set(Modchu_AS.setRender, model, render);		}		//Modchu_Debug.mDebug("ModchuModel_CustomModel render 3");		if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel armorType="+armorType+" mainModeltexture="+mainModeltexture);		boolean flag1 = armorType < 1;		if (!(model != null				&& model instanceof MultiModelCustom)) {			if (flag1) {				if (mainModeltexture != null) {					if (render != null							&& mainModeltexture != null) {						Modchu_AS.set(Modchu_AS.renderBindTexture, render, mainModeltexture);						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render mainModeltexture="+mainModeltexture);						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render model.getClass()="+(model.getClass()));						//Modchu_Debug.mDebug("ModchuModel_CustomModel render entityCaps.getClass()="+(entityCaps.getClass()));						Class c = getIModelCapsClass();						Object modelCaps = getModelCaps(entityCaps);						if (c != null) Modchu_Reflect.invokeMethod(isLMMModel ?								Modchu_Reflect.loadClass("MMM_ModelBase") : Modchu_ModelMultiReplacePoint.class,								"render", new Class[]{ c, float.class, float.class, float.class, float.class, float.class, float.class, boolean.class }, model, new Object[]{ modelCaps, f, f1, ticksExisted, pheadYaw, pheadPitch, f5, getIsRendering(entityCaps, 0) });					} else {						Modchu_Debug.mDebug("ModchuModel_CustomModel render render == null !!");					}				} else {					Modchu_Debug.mDebug("ModchuModel_CustomModel render mainModeltexture == null !!");				}			} else {				Modchu_Debug.mDebug("ModchuModel_CustomModel render !flag1 armorType="+armorType);				String s;				String armorName = (String) baseModel.getCapsValue(baseModel.caps_textureArmorName);				Object inventory = baseModel.getCapsValue(baseModel.caps_Inventory);				Object itemStack;				if (inventory != null) {					//for(int i = 0; i < 4; i++) {						itemStack = Modchu_AS.get(Modchu_AS.inventoryPlayerArmorItemInSlot, inventory, showArmorPartsNumber);						s = (String) baseModel.getCapsValue(baseModel.caps_armorTexture, armorName, armorType, itemStack);						Object resourceLocations = armorType == 1 ? ModchuModel_Main.textureManagerGetArmorTexture(s, 64, itemStack) :							ModchuModel_Main.textureManagerGetArmorTexture(s, 80, itemStack);						//Modchu_Debug.mDebug("ModchuModel_CustomModel armor resourceLocations="+resourceLocations);						armorRender(entityCaps, resourceLocations, armorType, itemStack, model, showArmorPartsNumber, entity, f, f1, ticksExisted, pheadYaw, pheadPitch, f5);					//}				}			}		} else {			if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel model == MultiModelCustom");		}		String s1 = null;		if (partsRendering) {			//Modchu_Debug.mDebug("ModchuModel_CustomModel render textureAndModelRendererList="+textureAndModelRendererList);			if (textureAndModelRendererList != null				&& textureAndModelRendererList.size() > 0) {				allShowModelSetting(false);				String s2 = null;				String s3 = null;				//Modchu_Debug.mDebug("textureAndModelRendererList.size()="+textureAndModelRendererList.size());				for(Object[] o : textureAndModelRendererList) {					boolean flag = false;					if (o != null							&& o.length > 0							&& o[0] != null							&& o[1] != null) ;else {						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render partsRendering continue o="+o);						continue;					}					Object texture = o[0];					if (texture != null) {						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render parts texture="+texture);						if (render != null) Modchu_AS.set(Modchu_AS.renderBindTexture, render, texture);					}					List<Modchu_ModelRenderer> list = (List) o[1];					if (list != null							&& !list.isEmpty()) {						for(Modchu_ModelRenderer modelRenderer : list) {							if (customModelShowModelMemoryMapGet(modelRenderer)) {								if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render customModelShowModelSetting call");								customModelShowModelSetting(entityCaps, modelRenderer, true);							} else {								if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render MemoryMap false modelRenderer="+modelRenderer);							}						}						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render model="+model);						if (debug) {							if (model instanceof MultiModelBaseBiped) {								for(Modchu_ModelRendererBase modelRendererBase : ((MultiModelBaseBiped) model).bipedHead.childModels) {									Modchu_Debug.mDebug1("ModchuModel_CustomModel render bipedHead.childModels modelRenderer.getBoxName()="+((Modchu_ModelRenderer) modelRendererBase).getBoxName()+" showModel="+modelRendererBase.showModel+" modelRenderer="+modelRendererBase);								}							}						}						if (model instanceof MultiModelCustom) {							((MultiModelCustom) model).superRender(entityCaps, f, f1, ticksExisted, pheadYaw, pheadPitch, f5);							//if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render superRender call");						} else {							Class c = getIModelCapsClass();							if (c != null) {								Modchu_Reflect.invokeMethod(model.getClass(), "render", new Class[]{ c, float.class, float.class,									float.class, float.class, float.class, float.class, boolean.class }, model, new Object[]{ entityCaps, f, f1, ticksExisted, pheadYaw, pheadPitch, f5, getIsRendering(entityCaps, armorType) });								if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render customModelShowModelSetting render call");							} else {								if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render customModelShowModelSetting render getIModelCapsClass null !!");							}						}						customModelShowModelSetting(entityCaps, (List)null, false);						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render customModelShowModelSetting render after call");					} else {						if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel render parts list="+list);					}				}			}			allShowModelMemoryRead();			customModelShowModelMemoryRead();		}		//Modchu_Debug.mDebug("ModchuModel_CustomModel render end. ");	}	private void armorRender(ModchuModel_IModelCaps entityCaps, Object resourceLocation, int armorType, Object itemstack, Object model, int i, Object entity, float f, float f1, float ticksExisted, float pheadYaw, float pheadPitch, float f5) {		if (resourceLocation != null) ;else return;/*		if (setArmorModelMethodType == 0) return;		switch(setArmorModelMethodType) {		case 1:			Modchu_Reflect.invoke(setArmorModelMethod, render, new Object[]{ ((MultiModelBaseBiped) model), ((EntityPlayer) entity), i, f });			break;		case 2:		case 3:			Modchu_Reflect.invoke(setArmorModelMethod, render, new Object[]{ entity, i, f });			break;		}*/		if (setArmorModel(entityCaps, (Object) model, itemstack, entity, i, f) > -1) {			Object render = Modchu_Reflect.getFieldObject(model.getClass(), "render", model);			if (resourceLocation != null) {				Modchu_AS.set(Modchu_AS.renderBindTexture, render, resourceLocation);			}			Object modelCaps = getModelCaps(entityCaps);			Modchu_Reflect.invokeMethod(model.getClass(), "render", new Class[]{ getIModelCapsClass(), float.class, float.class,					float.class, float.class, float.class, float.class, boolean.class }, model, new Object[]{ modelCaps, f, f1, ticksExisted, pheadYaw, pheadPitch, f5, getIsRendering(entityCaps, armorType) });			//model.render(entityCaps, f, f1, ticksExisted, pheadYaw, pheadPitch, f5, getIsRendering(entityCaps, armorType));		}	}	private int setArmorModel(ModchuModel_IModelCaps entityCaps, Object model, Object itemstack, Object entity, int i, float f) {		byte byte0 = -1;		if (model != null				&& !(model instanceof MultiModelCustom)) ;else return byte0;		int armorType = getArmorType();		if (armorType > 1) ;else return byte0;		int i2 = armorType == 2 ? 0 : 1;		if (Modchu_AS.getInt(Modchu_AS.itemStackStackSize, itemstack) > 0) {			if (model instanceof MultiModelBaseBiped) {				((MultiModelBaseBiped) model).showArmorParts(entityCaps, i, i2);			} else {				Modchu_Reflect.invokeMethod(model.getClass(), "showArmorParts", new Class[]{ int.class, int.class }, model, new Object[]{ i, i2 });				//model.showArmorParts(i, i2);			}//-@-b181			byte0 = (byte) (Modchu_AS.getBoolean(Modchu_AS.itemStackIsItemEnchanted, itemstack) ? 15 : 1);//@-@b181		}		return byte0;	}	public void setLivingAnimations(ModchuModel_IModelCaps entityCaps, float f, float f1, float renderPartialTicks) {		Object model = getModel();		if (model != null				&& !(model instanceof MultiModelCustom)) {			Class c = getIModelCapsClass();			Object modelCaps = getModelCaps(entityCaps);			if (c != null) Modchu_Reflect.invokeMethod(model.getClass(), "setLivingAnimations", new Class[]{					c, float.class, float.class, float.class },					model, new Object[]{ modelCaps, f, f1, renderPartialTicks });			//model.setLivingAnimations(entityCaps, f, f1, renderPartialTicks);		}	}	public void setLivingAnimationsLM(ModchuModel_IModelCaps entityCaps, float f, float f1, float renderPartialTicks) {		//Modchu_Debug.Debug("ModchuModel_CustomModel setLivingAnimationsLM");		((MultiModelCustom) baseModel).superSetLivingAnimationsLM(entityCaps, f, f1, renderPartialTicks);		if (partsMap != null				&& !partsMap.isEmpty()) {			Object entity = baseModel.getCapsValue(entityCaps, entityCaps.caps_Entity);			if (entity != null) ;else return;			Object model = getModel();			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				byte partsType = Modchu_CastHelper.Byte(modelRenderer.getFreeVariable("partsType"));				//Modchu_Debug.mDebug("ModchuModel_CustomModel setLivingAnimationsLM partsType="+partsType);				if (partsType == eyeR						| partsType == eyeL) {					//Modchu_Debug.mDebug("ModchuModel_CustomModel setLivingAnimationsLM getBoxName()="+modelRenderer.getBoxName());					// 目パチ					float ticksExisted = Modchu_AS.getFloat(Modchu_AS.entityTicksExisted, entity);					float entityIdFactor = ModchuModel_ModelCapsHelper.getCapsValueFloat(entityCaps, entityCaps.caps_entityIdFactor);					float f3 = (float)ticksExisted + renderPartialTicks + entityIdFactor;					//Modchu_Debug.mDebug("ticksExisted="+ticksExisted);					//Modchu_Debug.mDebug("renderPartialTicks="+renderPartialTicks);					//Modchu_Debug.mDebug("entityIdFactor="+ModchuModel_ModelCapsHelper.getCapsValueFloat(entityCaps, baseModel.caps_entityIdFactor));					//Modchu_Debug.dDebug("f3="+f3+" 0 > ? "+(Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.05F) + Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.13F) + Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.7F) + 2.55F));					if( 0 > Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.05F) + Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.13F) + Modchu_AS.getFloat(Modchu_AS.mathHelperSin, f3 * 0.7F) + 2.55F) {						customModelShowModelSetting(entityCaps, modelRenderer, true);						customModelShowModelMemoryMapPut(modelRenderer, modelRenderer.showModel);						//Modchu_Debug.dDebug("true  showModel="+modelRenderer.showModel, 1);					} else {						customModelShowModelSetting(entityCaps, modelRenderer, false);						customModelShowModelMemoryMapPut(modelRenderer, modelRenderer.showModel);						//Modchu_Debug.dDebug("false showModel="+modelRenderer.showModel, 1);					}				}			}		}	}	public void setRotationAngles(float f, float f1, float f2, float f3, float f4, float f5, ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model != null				&& !(model instanceof MultiModelCustom)) ;else return;		Object modelCaps = getModelCaps(entityCaps);		Modchu_Reflect.invokeMethod(model.getClass(), "setRotationAngles", new Class[]{				float.class, float.class, float.class, float.class, float.class, float.class, getIModelCapsClass()  },				model, new Object[]{ f, f1, f2, f3, f4, f5, modelCaps });		//Modchu_Debug.mDebug("mainModel.isWait="+mainModel.isWait+" baseModel.isWait="+baseModel.isWait+" caps_isWait="+baseModel.entityCaps.getCapsValue(baseModel.caps_isWait));	}	public void setRotationAnglesLM(float f, float f1, float ticksExisted, float pheadYaw, float pheadPitch, float f5, ModchuModel_IModelCaps entityCaps) {		//Modchu_Debug.Debug("ModchuModel_CustomModel setRotationAnglesLM");		//Modchu_Debug.mDebug("ModchuModel_CustomModel setRotationAnglesLM getArmorType()="+getArmorType());		Object model = getModel();		if (model != null) ;else return;		if (partsMap != null				&& !partsMap.isEmpty()) {			byte partsType;			int i = 0;			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				partsType = Modchu_CastHelper.Byte(modelRenderer.getFreeVariable("partsType"));				if (ModchuModel_ModelCapsHelper.getCapsValueBoolean(model, entityCaps.caps_aimedBow)) {					if (partsType == eyeR) {						customModelShowModelSetting(entityCaps, modelRenderer, false);						customModelShowModelMemoryMapPut(modelRenderer, modelRenderer.showModel);						//Modchu_Debug.mDebug("caps_aimedBow eyeR modelRenderer.showModel="+modelRenderer.showModel);					}					if (partsType == eyeL) {						customModelShowModelSetting(entityCaps, modelRenderer, true);						customModelShowModelMemoryMapPut(modelRenderer, modelRenderer.showModel);						//Modchu_Debug.mDebug("caps_aimedBow eyeL modelRenderer.showModel="+modelRenderer.showModel);					}				}				if (partsType == ear						| partsType == tail) {					float partsTypeFactor = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("partsTypeFactor"));					float partsTypeCorrection = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("partsTypeCorrection"));					if (partsType == ear) {						float f6 = (Float) Modchu_Reflect.invokeMethod(model.getClass(), "mh_sin", new Class[]{ float.class }, model, new Object[]{ ticksExisted * 0.05F });						modelRenderer.rotateAngleX = f6 * partsTypeFactor + partsTypeCorrection;					}					if (partsType == tail) {						float f7 = (Float) Modchu_Reflect.invokeMethod(model.getClass(), "mh_cos", new Class[]{ float.class }, model, new Object[]{ ticksExisted * 0.2F });						modelRenderer.rotateAngleY = modelRenderer.rotateAngleZ = f7 * partsTypeFactor + partsTypeCorrection;						//Modchu_Debug.Debug("ModchuModel_CustomModel setRotationAnglesLM tail modelRenderer.rotateAngleY="+modelRenderer.rotateAngleY);					}				}			}		}	}	public void skirtFloatsInit(float f, float f1) {		Object model = getModel();		if (model instanceof MultiModelSkirtFloats				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelSkirtFloats) model).skirtFloatsInit(f, f1);	}	public void setRotationAnglesfirstPerson(float f, float f1, float f2, float f3, float f4, float f5, ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superSetRotationAnglesfirstPerson(f, f1, f2, f3, f4, f5, entityCaps);		else if (model instanceof MultiModelBaseBiped) ((MultiModelBaseBiped) model).setRotationAnglesfirstPerson(f, f1, f2, f3, f4, f5, entityCaps);	}	public Object getCapsValue(int pIndex, Object[] pArg) {		Object model = getModel();		if (model != null) ;else return null;		Object o = null;		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).superGetCapsValue(pIndex, (Object[]) pArg);		pArg = capsObjectCheck(pArg);		o = Modchu_Reflect.invokeMethod(model.getClass(), "getCapsValue", new Class[]{ int.class, Object[].class }, model, new Object[]{ pIndex, pArg });		return o;	}	public boolean setCapsValue(int pIndex, Object[] pArg) {		Object model = getModel();		if (model != null) ;else return false;		boolean b = false;		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).superSetCapsValue(pIndex, (Object[]) pArg);		pArg = capsObjectCheck(pArg);		b = Modchu_CastHelper.Boolean(Modchu_Reflect.invokeMethod(model.getClass(), "setCapsValue", new Class[]{ int.class, Object[].class }, model, new Object[]{ pIndex, pArg }));		return b;	}	public boolean renderItems(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model != null				&& !(model instanceof MultiModelCustom)) {			Class c = getIModelCapsClass();			Object modelCaps = getModelCaps(entityCaps);			if (c != null) Modchu_Reflect.invokeMethod(model.getClass(), "renderItems", new Class[]{ c }, model, new Object[]{ modelCaps });		}		return model instanceof MultiModelCustom;	}	public boolean defaultPartsSettingBefore(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).defaultPartsSettingBefore(entityCaps);		return model instanceof MultiModelCustom;	}	public boolean defaultPartsSettingAfter(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).defaultPartsSettingAfter(entityCaps);		return model instanceof MultiModelCustom;	}	public boolean showModelSettingReflects(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).showModelSettingReflects(entityCaps);		return model instanceof MultiModelCustom;	}	public boolean actionInit(ModchuModel_IModelCaps entityCaps, int i) {		Object model = getModel();		if (model instanceof MultiModelAction				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelAction) model).actionInit(entityCaps, i);		return model instanceof MultiModelCustom;	}	public boolean actionRelease(ModchuModel_IModelCaps entityCaps, int i) {		Object model = getModel();		if (model instanceof MultiModelAction				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelAction) model).actionRelease(entityCaps, i);		defaultCustomAddChild();		return model instanceof MultiModelCustom;	}	public boolean action(float f, float f1, float f2, float f3, float f4, float f5, int i, ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelAction				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelAction) model).action(f, f1, f2, f3, f4, f5, i, entityCaps);		return model instanceof MultiModelCustom;	}	public float getHeight(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = 0.0F;		Object modelCaps = getModelCaps(entityCaps);		if (model != null				&& !(model instanceof MultiModelCustom)) f = Modchu_CastHelper.Float(Modchu_Reflect.invokeMethod(model.getClass(), "getHeight", new Class[]{ getIModelCapsClass() }, model, new Object[]{ modelCaps }));		return f;	}	public float getWidth(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = 0.0F;		Object modelCaps = getModelCaps(entityCaps);		if (model != null				&& !(model instanceof MultiModelCustom)) f = Modchu_CastHelper.Float(Modchu_Reflect.invokeMethod(model.getClass(), "getWidth", new Class[]{ getIModelCapsClass() }, model, new Object[]{ modelCaps }));		return f;	}	public float getyOffset(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = -100.0F;		Object modelCaps = getModelCaps(entityCaps);		if (model != null				&& !(model instanceof MultiModelCustom)) f = Modchu_CastHelper.Float(Modchu_Reflect.invokeMethod(model.getClass(), "getyOffset", new Class[]{ getIModelCapsClass() }, model, new Object[]{ modelCaps }));		return f;	}	public float getRidingHeight(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = 0.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).getRidingHeight(entityCaps);		return f;	}	public float getRidingWidth(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = 0.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).getRidingWidth(entityCaps);		return f;	}	public float getRidingyOffset(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = -100.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).getRidingyOffset(entityCaps);		return f;	}	public float getMountedYOffset(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = -100.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).getMountedYOffset(entityCaps);		return f;	}	public double getSittingyOffset(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		double d = -100.0D;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) d = ((MultiModelBaseBiped) model).getSittingyOffset(entityCaps);		return d;	}	public float ridingViewCorrection(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = -100.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).ridingViewCorrection(entityCaps);		return f;	}	public float getModelScale(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		float f = 0.0F;		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) f = ((MultiModelBaseBiped) model).getModelScale(entityCaps);		return f;	}	public boolean setArmorBipedHeadShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedHeadShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorBipedBodyShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedBodyShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorBipedRightArmShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedRightArmShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorBipedLeftArmShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedLeftArmShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorBipedRightLegShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedRightLegShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorBipedLeftLegShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorBipedLeftLegShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public boolean setArmorSkirtShowModel(ModchuModel_IModelCaps entityCaps, boolean b) {		Object model = getModel();		if (model instanceof MultiModelBaseBiped				&& model != null						&& !(model instanceof MultiModelCustom)) ((MultiModelBaseBiped) model).setArmorSkirtShowModel(entityCaps, b);		return model instanceof MultiModelCustom;	}	public void allShowModelMemory() {		Object model = getModel();		Modchu_ModelRenderer modelRenderer;		for (int i = 0; i < modelRendererFieldsMap.size(); i++) {			try {				modelRenderer = (Modchu_ModelRenderer) modelRendererFieldsMap.get(i).get(model);				if (modelRenderer != null) {					showModelMemoryMapPut(modelRenderer, modelRenderer.showModel);					//Modchu_Debug.mDebug("allShowModelMemory modelRendererFieldsMap.get("+i+").getName() = "+modelRendererFieldsMap.get(i).getName()+" modelRenderer.showModel="+modelRenderer.showModel);				}			} catch (Exception e) {				e.printStackTrace();			}		}	}	public void customModelShowModelMemory() {		if (partsMap != null				&& !partsMap.isEmpty()) {			boolean b1 = false;			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				customModelShowModelMemoryMapPut(modelRenderer, modelRenderer.showModel);				if (debug						&& memoryDebug)					Modchu_Debug.mDebug("customModelShowModelMemory get("+key+") showModel="+modelRenderer.showModel);			}		} else {			if (debug					&& memoryDebug) {				if (partsMap != null) ;else Modchu_Debug.mDebug("customModelShowModelMemory partsMap == null !!");				if (partsMap.isEmpty()) Modchu_Debug.mDebug("customModelShowModelMemory partsMap.isEmpty() !!");			}		}	}	public void allShowModelMemoryRead() {		Object model = getModel();		Modchu_ModelRenderer modelRenderer;		for (int i = 0; i < modelRendererFieldsMap.size(); i++) {			try {				modelRenderer = (Modchu_ModelRenderer) modelRendererFieldsMap.get(i).get(model);				if (modelRenderer != null) {					((Modchu_ModelRenderer) modelRendererFieldsMap.get(i).get(model)).showModel = showModelMemoryMapGet(modelRenderer);					//Modchu_Debug.mDebug("allShowModelMemory modelRendererFieldsMap.get("+i+").getName() = "+modelRendererFieldsMap.get(i).getName()+" ((ModchuModel_ModelRenderer) modelRendererFieldsMap.get(i).get(model)).showModel="+((ModchuModel_ModelRenderer) modelRendererFieldsMap.get(i).get(model)).showModel);				}			} catch (Exception e) {				e.printStackTrace();			}		}	}	public void customModelShowModelMemoryRead() {		if (partsMap != null				&& !partsMap.isEmpty()) {			boolean b1 = false;			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				modelRenderer.showModel = customModelShowModelMemoryMapGet(modelRenderer);				if (debug						&& memoryDebug)					Modchu_Debug.mDebug("customModelShowModelMemoryRead parts["+key+"].showModel="+modelRenderer.showModel);			}		}	}	public void changeModel(ModchuModel_IModelCaps entityCaps) {		if (debug) Modchu_Debug.mlDebug("ModchuModel_CustomModel changeModel");		Object model = getModel();		if (model != null) ;else return;		changeModelInit = true;		showModelMemoryMap.clear();		textureListMap.clear();		customModelShowModelMemoryMap.clear();		modelRendererFieldsMap.clear();		defaultAddChild();		colorSettingForcingFlag = true;		changeColor(entityCaps);		Field[] fields = model.getClass().getFields();		Object o;		Modchu_ModelRenderer modelRenderer;		int k = 0;		for (Field f : fields) {			//Modchu_Debug.mDebug("changeModel f.getType() = "+f.getType());			try {				o = f.get(model);				if (Modchu_ModelRenderer.class.isInstance(o)) {					modelRenderer = (Modchu_ModelRenderer) f.get(model);					if (modelRenderer != null) {						modelRendererFieldsMap.put(k, f);						k++;					}				}			} catch (Exception e1) {				e1.printStackTrace();			}		}		if (debug) Modchu_Debug.mlDebug("ModchuModel_CustomModel changeModel end.");	}	public void changeColor(ModchuModel_IModelCaps entityCaps) {		if (debug) Modchu_Debug.mlDebug("ModchuModel_CustomModel changeColor");		Object entity = baseModel.getCapsValue(entityCaps, entityCaps.caps_Entity);		Object model = getModel();		if (model != null			&& entityCaps != null) ;else {				if (entityCaps != null) ;else Modchu_Debug.mDebug1("ModchuModel_CustomModel colorSetting entityCaps == null !!");				if (model != null) ;else Modchu_Debug.mDebug1("ModchuModel_CustomModel colorSetting model == null !!");				return;		}		int color = getMaidColor(entityCaps);		//Modchu_Debug.mDebug("tempColor="+tempColor+" color="+color+" colorSettingForcingFlag="+colorSettingForcingFlag);		if (tempColor != color				| guiTextureSelectFlag				| colorSettingForcingFlag) ;else return;		//Modchu_Debug.mDebug("tempColor="+tempColor+" color="+color+" colorSettingForcingFlag="+colorSettingForcingFlag);		colorSettingForcingFlag = false;		colorSetting(entityCaps, color);		if (debug) Modchu_Debug.mlDebug("ModchuModel_CustomModel changeColor end.");	}	public void setDefaultPause(float f, float f1, float f2, float f3, float f4,			float f5, ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superSetDefaultPause(f, f1, f2, f3, f4, f5, entityCaps);		else if (model instanceof MultiModelBaseBiped) ((MultiModelBaseBiped) model).setDefaultPause(f, f1, f2, f3, f4, f5, entityCaps);	}	public float[] getArmorModelsSize() {		Object model = getModel();		if (model != null) {			if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).superGetArmorModelsSize();			if (model instanceof Modchu_ModelMultiReplacePoint) {				//Modchu_Debug.mDebug("getArmorModelsSize model.getClass()="+model.getClass());				return (float[]) Modchu_Reflect.invokeMethod(model.getClass(), "getArmorModelsSize", model);			}		}		return new float[] {0.1F, 0.5F};	}	public void renderFirstPersonHand(ModchuModel_IModelCaps entityCaps, float f) {		Object render = Modchu_AS.get(Modchu_AS.renderManagerGetEntityRenderObject);		if (mainModeltexture != null) Modchu_AS.set(Modchu_AS.renderBindTexture, render, mainModeltexture);		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superRenderFirstPersonHand(entityCaps, f);		else if (model instanceof MultiModelBaseBiped) ((MultiModelBaseBiped) model).renderFirstPersonHand(entityCaps, f);		else {			Class c = getIModelCapsClass();			Object modelCaps = getModelCaps(entityCaps);			if (c != null) Modchu_Reflect.invokeMethod(model.getClass(), "renderFirstPersonHand", new Class[]{ c }, model, new Object[]{ modelCaps });		}	}	private void loadInit(File file, List list, boolean b) {		List list2 = list != null ? list : !b ? (ArrayList) Modchu_Config.cfgData.get(file) : null;		if (list2 == null) {			list2 = new ArrayList();			BufferedReader breader = null;			try {				breader = new BufferedReader(new FileReader(file));				String rl;				for (int i = 0; (rl = breader.readLine()) != null ; i++) {					int i1;					list2.add(rl);					if (rl.startsWith("#")							| rl.startsWith("/")) continue;					initCheckData(rl.toString());				}				Modchu_Config.cfgData.put(file, list2);			} catch (Exception e) {				//Modchu_Debug.cDebug("ModchuModel_CustomModel loadInit load "+ file.toString() +" load fail.");				e.printStackTrace();			 } finally {				 try {					 if (breader != null) breader.close();				 } catch (Exception e) {				 }			 }		} else {			String s2;			for (int i = 0; i < list2.size() ; i++) {				s2 = (String) list2.get(i);				if (s2.startsWith("#")						| s2.startsWith("/")) continue;				initCheckData(s2.toString());			}		}	}	private void initCheckData(String s) {		s = s.replaceAll(" ", "");		s = s.replaceAll("	", "");		int i1;		if (s.startsWith("name")) {			i1 = s.indexOf('=');			if (i1 > -1) {				return;			}		}		if (s.startsWith("mainModeltextureName")) {			i1 = s.indexOf('=');			if (i1 > -1) {				mainModeltextureName = s.substring(i1 + 1);				i1 = mainModeltextureName.indexOf(";");				if (i1 > -1) {					String s1 = mainModeltextureName.substring(i1 + 1);					mainModelDesignationColor = Modchu_CastHelper.Int(s1);					mainModeltextureName = mainModeltextureName.substring(0, i1);				}				if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel initCheckData mainModelName="+s.substring(i1 + 1));				return;			}		}	}	public void save(File file) {		if (!file.exists()) {			try {				BufferedWriter bwriter = new BufferedWriter(new FileWriter(						file));				StringBuilder sb = new StringBuilder();				List list = new ArrayList();				bwriter.write("");				bwriter.newLine();				bwriter.close();				Modchu_Debug.lDebug("ModchuModel_CustomModel "+ file.toString() +" new file create.");			} catch (Exception e) {				Modchu_Debug.lDebug(""+getClass().getName(), "save file="+ file.toString() +" file writer fail.", 2, e);				e.printStackTrace();			}		}		if (file.exists() && file.canRead() && file.canWrite()) {			List lines = getSaveList();			try {			// 保存				if (!lines.isEmpty()						&& (file.exists() || file.createNewFile())						&& file.canWrite()) {					BufferedWriter bwriter = new BufferedWriter(							new FileWriter(file));					String t;					for (int i = 0 ; i < lines.size() ; i++) {						t = (String) lines.get(i);						bwriter.write(t);						bwriter.newLine();					}					bwriter.close();				}			} catch (Exception er) {				Modchu_Debug.lDebug("ModchuModel_CustomModel save file save fail.");				er.printStackTrace();			}		}	}	public List getSaveList() {		List lines = new ArrayList();		String s;		String s1;		StringBuilder sb = new StringBuilder();		sb = sb.append("mainModeltextureName").append("=").append(mainModeltextureName);		lines.add(sb.toString());		lines.add("");		sb.delete(0, sb.length());		if (partsMap != null				&& !partsMap.isEmpty()) {			int i = 0;			int partsTextureColor;			int partsTextureWidth;			int partsTextureHeight;			float initRotateAngleX;			float initRotateAngleY;			float initRotateAngleZ;			float initRotationPointX;			float initRotationPointY;			float initRotationPointZ;			byte partsType;			byte boxType;			float[] f0;			float[] f1;			Object o;			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				sb = sb.append("name").append("=").append(key);				lines.add(sb.toString());				sb.delete(0, sb.length());				sb = sb.append("textureName").append("=").append(modelRenderer.getFreeVariable("textureName"));				partsTextureColor = Modchu_CastHelper.Int(modelRenderer.getFreeVariable("partsTextureColor"));				if (partsTextureColor != -1)  sb = sb.append(";").append(partsTextureColor);				lines.add(sb.toString());				sb.delete(0, sb.length());				partsTextureWidth = Modchu_CastHelper.Int(modelRenderer.getFreeVariable("partsTextureWidth"));				sb = sb.append("textureWidth").append("=").append(partsTextureWidth);				lines.add(sb.toString());				sb.delete(0, sb.length());				partsTextureHeight = Modchu_CastHelper.Int(modelRenderer.getFreeVariable("partsTextureHeight"));				sb = sb.append("textureHeight").append("=").append(partsTextureHeight);				lines.add(sb.toString());				sb.delete(0, sb.length());				sb = sb.append("textureOffset").append("=").append(modelRenderer.getTextureOffsetX()).append(",").append(modelRenderer.getTextureOffsetY());				lines.add(sb.toString());				sb.delete(0, sb.length());				if (modelRenderer.cubeList != null						&& !modelRenderer.cubeList.isEmpty()) {					for (int i1 = 0; i1 < modelRenderer.cubeList.size(); i1++) {						boxType = Modchu_CastHelper.Byte(modelRenderer.getFreeVariable("boxType"+i1));						o = modelRenderer.getFreeVariable("partsBoxData"+i1);						f0 = o != null								&& o instanceof float[] ? (float[])o : null;						f1 = copyBoxDataFloat(f0);						if (i1 > 0) {							ConcurrentHashMap textureOffsetMap = Modchu_AS.getConcurrentHashMap(Modchu_AS.modelRendererGetTextureOffsetMap, modelRenderer);							String key2 = (String)Modchu_Main.getConcurrentHashMapKey(textureOffsetMap, i1 - 1);							Object textureOffset = textureOffsetMap.get(key2);							sb = sb.append("textureOffset").append("=").append(key2).append(",").append(Modchu_AS.getInt(Modchu_AS.textureOffsetTextureOffsetX, textureOffset)).append(",").append(Modchu_AS.getInt(Modchu_AS.textureOffsetTextureOffsetY, textureOffset));							lines.add(sb.toString());							sb.delete(0, sb.length());						}						switch(boxType) {						case 0:							sb = sb.append("addBox");							break;						case 1:							sb = sb.append("addPlate");							break;						case 2:							sb = sb.append("addBall");							break;						}						sb = sb.append("(").append(f1[0]).append("F,").append(f1[1]).append("F,").append(f1[2]).append("F,").append(f1[3]).append(",").append(f1[4]).append(",").append(f1[5]);						if (boxType != 2) sb = sb.append(",").append(f1[6]).append("F,").append(f1[7]).append("F");						sb = sb.append(")");						lines.add(sb.toString());						sb.delete(0, sb.length());						i++;					}				}				initRotateAngleX = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotateAngleX"));				initRotateAngleY = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotateAngleY"));				initRotateAngleZ = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotateAngleZ"));				sb = sb.append("setRotateAngle").append("(").append(initRotateAngleX).append("F,").append(initRotateAngleY).append("F,").append(initRotateAngleZ).append("F)");				lines.add(sb.toString());				sb.delete(0, sb.length());				initRotationPointX = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotationPointX"));				initRotationPointY = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotationPointY"));				initRotationPointZ = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("initRotationPointZ"));				sb = sb.append("setRotationPoint").append("(").append(initRotationPointX).append("F,").append(initRotationPointY).append("F,").append(initRotationPointZ).append("F)");				lines.add(sb.toString());				sb.delete(0, sb.length());				ArrayList list = getPartsAddChildLiat(modelRenderer);				if (list != null						&& !list.isEmpty()) {					String s2 = null;					for (int i1 = 0; i1 < list.size(); i1++) {						s2 = (String) list.get(i1);						if (s2 != null) {							sb = sb.append(s2).append(".addChild");							lines.add(sb.toString());							sb.delete(0, sb.length());						}					}				}				partsType = Modchu_CastHelper.Byte(modelRenderer.getFreeVariable("partsType"));				float partsTypeFactor = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("partsTypeFactor"));				float partsTypeCorrection = Modchu_CastHelper.Float(modelRenderer.getFreeVariable("partsTypeCorrection"));				sb = sb.append("type").append("=").append(getPartsTypeString(partsType)).append(";").append(partsTypeFactor).append("F;").append(partsTypeCorrection).append("F");				lines.add(sb.toString());				sb.delete(0, sb.length());				lines.add("");			}		}		return lines;	}	private void load(File file, List list, boolean b, float f, float f1) {		List list2 = list != null ? list : !b ? (ArrayList) Modchu_Config.cfgData.get(file) : null;		String tempPartsName = null;		if (list2 == null) {			list2 = new ArrayList();			BufferedReader breader = null;			try {				breader = new BufferedReader(new FileReader(file));				String rl;				for (int i = 0; (rl = breader.readLine()) != null ; i++) {					int i1;					list2.add(rl);					if (rl.startsWith("#")							| rl.startsWith("/")) continue;					tempPartsName = settingData(tempPartsName, rl.toString(), f, f1);				}				Modchu_Config.cfgData.put(file, list2);				breader.close();			} catch (Error err) {				err.printStackTrace();			} catch (Exception e) {				//Modchu_Debug.cDebug("Modchu_Config load "+ file.toString() +" load fail.");				e.printStackTrace();			} finally {				try {					if (breader != null) breader.close();				} catch (Exception e) {				}			}		} else {			String s2;			//Modchu_Debug.mDebug("1 file="+file.toString()+" list.size()="+list.size());			for (int i = 0; i < list2.size() ; i++) {				s2 = (String) list2.get(i);				//Modchu_Debug.mDebug("s2="+s2);				if (s2.startsWith("#")						| s2.startsWith("/")) continue;				tempPartsName = settingData(tempPartsName, s2, f, f1);			}		}	}	private String settingData(String tempPartsName, String s, float f, float f1) {		Object model = getModel();		s = s.replaceAll(" ", "");		s = s.replaceAll("	", "");		int i1 = 0;		boolean flag = partsMap != null				&& !partsMap.isEmpty();		if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel settingData tempPartsName="+tempPartsName);		Modchu_ModelRenderer tempModelRenderer = flag ? partsMap.get(tempPartsName) : null;		flag = flag 				&& tempModelRenderer != null;		if (s.startsWith("name")) {			i1 = s.indexOf('=');			if (i1 > -1) {				tempPartsName = s.substring(i1 + 1);				Modchu_ModelRenderer modelRenderer = new Modchu_ModelRenderer((Modchu_ModelMultiReplacePoint) model, tempPartsName);				Modchu_Debug.cDebug("settingData boxName="+modelRenderer.getBoxName());				if (flag) modelRenderer.setFreeVariable("textureName", Modchu_CastHelper.String(tempModelRenderer.getFreeVariable("textureName")));				modelRenderer.setFreeVariable("partsTextureColor", flag ? Modchu_CastHelper.Int(tempModelRenderer.getFreeVariable("partsTextureColor"), -1) : -1);				modelRenderer.setFreeVariable("partsType", flag ? Modchu_CastHelper.Byte(tempModelRenderer.getFreeVariable("partsType"), normal) : normal);				modelRenderer.setFreeVariable("partsTypeCorrection", flag ? Modchu_CastHelper.Float(tempModelRenderer.getFreeVariable("partsTypeCorrection"), 1.0F) : 1.0F);				modelRenderer.setFreeVariable("partsTypeFactor", flag ? Modchu_CastHelper.Float(tempModelRenderer.getFreeVariable("partsTypeFactor"), 0.0F) : 0.0F);				modelRenderer.setTextureSize(flag ? (int)tempModelRenderer.textureWidth : 64, flag ? (int)tempModelRenderer.textureHeight : 32);				modelRenderer.setTextureOffset(flag ? tempModelRenderer.getTextureOffsetX() : 0, flag ? tempModelRenderer.getTextureOffsetY() : 0);				partsMap.put(tempPartsName, modelRenderer);				if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel ------------------- partsName="+tempPartsName);				return tempPartsName;			}		}		if (!flag) return tempPartsName;		if (s.startsWith("textureName")) {			i1 = s.indexOf('=');			if (i1 > -1) {				int i2 = s.indexOf(';');				if (i2 > -1) {					tempModelRenderer.setFreeVariable("partsTextureColor", Modchu_CastHelper.Byte(s.substring(i2 + 1)));					//s = s.substring(0, i2);				}				String textureName = s.substring(i1 + 1);				tempModelRenderer.setFreeVariable("textureName", textureName);				partsMap.put(tempPartsName, tempModelRenderer);				if (debug) Modchu_Debug.mDebug("settingData textureName="+textureName);				return tempPartsName;			}		}		if (s.startsWith("textureWidth")) {			i1 = s.indexOf('=');			if (i1 > -1) {				tempModelRenderer.textureWidth = Modchu_CastHelper.Int(s.substring(i1 + 1));				if (debug) Modchu_Debug.mDebug("settingData partsTextureWidth="+tempModelRenderer.textureWidth);				partsMap.put(tempPartsName, tempModelRenderer);				return tempPartsName;			}		}		if (s.startsWith("textureHeight")) {			i1 = s.indexOf('=');			if (i1 > -1) {				tempModelRenderer.textureHeight = Modchu_CastHelper.Int(s.substring(i1 + 1));				if (debug) Modchu_Debug.mDebug("settingData partsTextureHeight="+tempModelRenderer.textureHeight);				partsMap.put(tempPartsName, tempModelRenderer);				return tempPartsName;			}		}		if (s.startsWith("textureOffset")) {			i1 = s.indexOf('=');			if (i1 > -1) {				s = s.substring(i1 + 1);				String[] s0 = s.split(",");				if (s0 != null						&& s0.length > 1) {					int x = 0;					int y = 0;					if (s0.length == 2) {						x = Modchu_CastHelper.Int(s0[0]);						y = Modchu_CastHelper.Int(s0[1]);						tempModelRenderer.setTextureOffset(x, y);					} else if (s0.length > 2) {						String s1 = ""+s0[0];						x = Modchu_CastHelper.Int(s0[1]);						y = Modchu_CastHelper.Int(s0[2]);						tempModelRenderer.setTextureOffset(s1, x, y);					}					if (debug) Modchu_Debug.mDebug("settingData textureOffsetX="+x+" y="+y);					partsMap.put(tempPartsName, tempModelRenderer);					return tempPartsName;				}			}		}		if (s.startsWith("mirror")) {			i1 = s.indexOf('=');			if (i1 > -1) {				tempModelRenderer.mirror = Modchu_CastHelper.Boolean(s.substring(i1 + 1));				if (debug) Modchu_Debug.mDebug("settingData partsMirror="+tempModelRenderer.mirror);				partsMap.put(tempPartsName, tempModelRenderer);				return tempPartsName;			}		}		if (s.startsWith("addBox")				| s.startsWith("addPlate")				| s.startsWith("addBall")) {			//if (debug) Modchu_Debug.mDebug("settingData add s="+s);			byte boxType = (byte) (s.startsWith("addBox") ? 0 : s.startsWith("addPlate") ? 1 : s.startsWith("addBall") ? 2 : 0);			//if (debug) Modchu_Debug.mDebug("settingData add boxType="+boxType);			i1 = s.indexOf('(');			int i2 = s.indexOf(')');			if (i1 > -1					&& i2 > -1) ; else return tempPartsName;			String[] s0 = s.substring(i1 + 1, i2).split(",");			float[] f0 = new float[s0.length];			//if (debug) Modchu_Debug.mDebug("settingData add 1");			for (int i = 0; i < f0.length; i++) {				f0[i] = Modchu_CastHelper.Float(s0[i]);			}			//if (debug) Modchu_Debug.mDebug("settingData add 2");			i1 = tempModelRenderer.cubeList != null ? tempModelRenderer.cubeList.size() : -1;			boolean flag2 = false;			if (f0.length < 8) {				float[] tempF = new float[]{						0.0F, 0.0F, 0.0F, 1F, 1F, 1F, 1.0F, 0.0F				};				for(int i3 = 0; i3 < f0.length; i3++) {					tempF[i3] = f0[i3];				}				f0 = tempF;			}			switch (boxType) {			case 0:				Modchu_Debug.cDebug(new StringBuilder().append("ModchuModel_CustomModel addBox(")						.append(f0[0]).append("F,").append(f0[1]).append("F,").append(f0[2]).append("F,")						.append(f0[3]).append(",").append(f0[4]).append(",").append(f0[5]).append(",")						.append(f).append("F*").append(f0[6]).append("F+").append(f0[7]).append("F)").toString());				addBox(tempModelRenderer, f0, f);				flag2 = true;				break;			case 1:				Modchu_Debug.cDebug(new StringBuilder().append("ModchuModel_CustomModel addPlate(")						.append(f0[0]).append("F,").append(f0[1]).append("F,").append(f0[2]).append("F,")						.append(f0[3]).append(",").append(f0[4]).append(",").append(f0[5]).append(",")						.append(f).append("F*").append(f0[6]).append("F+").append(f0[7]).append("F)").toString());				addPlate(tempModelRenderer, f0, f);				flag2 = true;				break;			case 2:				Modchu_Debug.cDebug(new StringBuilder().append("ModchuModel_CustomModel addBall(")						.append(f0[0]).append("F,").append(f0[1]).append("F,").append(f0[2]).append("F,")						.append(f0[3]).append(",").append(f0[4]).append(",").append(f0[5])						.append(")").toString());				addBall(tempModelRenderer, f0, f);				flag2 = true;				break;			}			//if (debug) Modchu_Debug.mDebug("settingData add 3");			if (flag2) {				tempModelRenderer.setFreeVariable("boxType"+i1, boxType);				tempModelRenderer.setFreeVariable("partsBoxData"+i1, f0);			}			partsMap.put(tempPartsName, tempModelRenderer);			//Modchu_Debug.mDebug("settingData add end.");			return tempPartsName;		}		if (s.startsWith("setRotationPoint")) {			i1 = s.indexOf('(');			if (i1 > -1) {				String s1 = null;				float rotationPointX = 0.0F;				float rotationPointY = 0.0F;				float rotationPointZ = 0.0F;				for(int i2 = 0; i2 < 8						&& i1 > -1; i2++) {					s = s.substring(i1 + 1);					i1 = s.indexOf(',');					if (i1 > -1) {						switch (i2) {						case 0:							rotationPointX = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotationPointX(rotationPointX);							//Modchu_Debug.mDebug("ModchuModel_CustomModel partsRotationPointX["+partsCount+"]="+partsRotationPointX[partsCount]);							break;						case 1:							rotationPointY = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotationPointY(rotationPointY);							//Modchu_Debug.mDebug("ModchuModel_CustomModel partsRotationPointY["+partsCount+"]="+partsRotationPointY[partsCount]);							break;						}					} else {						i1 = s.indexOf(')');						if (i1 > -1) {							rotationPointZ = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotationPointZ(rotationPointZ);						}					}				}				tempModelRenderer.setFreeVariable("initRotationPointX", rotationPointX);				tempModelRenderer.setFreeVariable("initRotationPointY", rotationPointY);				tempModelRenderer.setFreeVariable("initRotationPointZ", rotationPointZ);				partsMap.put(tempPartsName, tempModelRenderer);				if (debug) Modchu_Debug.mDebug("ModchuModel_CustomModel partsRotationPoint("+rotationPointX+", "+rotationPointY+", "+rotationPointZ+")");				return tempPartsName;			}		}		if (s.startsWith("setRotateAngle")) {			i1 = s.indexOf('(');			if (i1 > -1) {				String s1 = null;				float rotateAngleX = 0.0F;				float rotateAngleY = 0.0F;				float rotateAngleZ = 0.0F;				for(int i2 = 0; i2 < 8						&& i1 > -1; i2++) {					s = s.substring(i1 + 1);					i1 = s.indexOf(',');					if (i1 > -1) {						switch (i2) {						case 0:							rotateAngleX = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotateAngleX(rotateAngleX);							//Modchu_Debug.mDebug("partsRotateAngleX="+rotateAngleX);							break;						case 1:							rotateAngleY = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotateAngleY(rotateAngleY);							//Modchu_Debug.mDebug("partsRotateAngleY="+rotateAngleY);							break;						}					} else {						i1 = s.indexOf(')');						if (i1 > -1) {							rotateAngleZ = Modchu_CastHelper.Float(s.substring(0, i1));							tempModelRenderer.setRotateAngleZ(rotateAngleZ);							//Modchu_Debug.mDebug("partsRotateAngleZ="+rotateAngleZ);						}					}				}				tempModelRenderer.setFreeVariable("initRotateAngleX", rotateAngleX);				tempModelRenderer.setFreeVariable("initRotateAngleY", rotateAngleY);				tempModelRenderer.setFreeVariable("initRotateAngleZ", rotateAngleZ);				partsMap.put(tempPartsName, tempModelRenderer);				if (debug) Modchu_Debug.mDebug("RotateAngle("+rotateAngleX+", "+rotateAngleY+", "+rotateAngleZ+")");				return tempPartsName;			}		}		if (s.indexOf("addChild") > -1) {			i1 = s.indexOf('.');			if (i1 > -1) {				s = s.substring(0, i1);				if (!s.equals("null")) {					addPartsAddChildList(s, tempModelRenderer);					partsMap.put(tempPartsName, tempModelRenderer);				}				if (debug) {					Modchu_Debug.mDebug("settingData addChild s="+s);					ArrayList list = getPartsAddChildLiat(tempModelRenderer);					Modchu_Debug.cDebug("settingData addChild name="+tempPartsName);					Modchu_Debug.cDebug("settingData addChild list.size()="+list.size());				}				return tempPartsName;			}		}		if (s.startsWith("type")) {			i1 = s.indexOf('=');			if (i1 > -1) {				s = s.substring(i1 + 1);				i1 = s.indexOf(';');				if (i1 > -1) {					String[] s0 = s.split(";");					s = s0[0];					float ff1 = s0 != null							&& s0.length > 1 ? Modchu_CastHelper.Float(s0[1]) : 1.0F;					float ff2 = s0 != null							&& s0.length > 2 ? Modchu_CastHelper.Float(s0[2]) : 0.1F;					tempModelRenderer.setFreeVariable("partsTypeFactor", ff1);					tempModelRenderer.setFreeVariable("partsTypeCorrection", ff2);					//Modchu_Debug.mDebug("ModchuModel_CustomModel partsTypeFactor ff1="+ff1);					//Modchu_Debug.mDebug("ModchuModel_CustomModel partsTypeCorrection ff2="+ff2);				}				byte by = 0;				if (s.equalsIgnoreCase("normal")) by = normal;				else if (s.equalsIgnoreCase("eyeR")) by = eyeR;				else if (s.equalsIgnoreCase("eyeL")) by = eyeL;				else if (s.equalsIgnoreCase("ear")) by = ear;				else if (s.equalsIgnoreCase("tail")) by = tail;				tempModelRenderer.setFreeVariable("partsType", by);				partsMap.put(tempPartsName, tempModelRenderer);				if (debug) Modchu_Debug.mDebug("settingData partsType="+getPartsTypeString(by));				return tempPartsName;			}		}		return tempPartsName;	}	private List<Object[]> partsTextureAndModelRendererListAdd(List<Object[]> textureAndModelRendererList, Modchu_ModelRenderer modelRenderer, Object texture) {		Object[] o = null;		List<Modchu_ModelRenderer> list = null;		int i = 0;		if (!textureAndModelRendererList.isEmpty()) {			for(Object[] o2 : textureAndModelRendererList) {				if (o2[0].equals(texture)) {					o = o2;					list = (List<Modchu_ModelRenderer>) o[1];					break;				}				i++;			}		}		if (o != null) ;else {			list = new ArrayList();			o = new Object[] {					texture, list			};		}		if (!list.contains(modelRenderer)) {			list.add(modelRenderer);			o[1] = list;		}		if (textureAndModelRendererList.size() > i) textureAndModelRendererList.set(i, o);		else textureAndModelRendererList.add(o);		return textureAndModelRendererList;	}	private ArrayList getPartsAddChildLiat(Modchu_ModelRenderer modelRenderer) {		Object o = modelRenderer.getFreeVariable("partsAddChildList");		return o != null				&& o instanceof ArrayList ? (ArrayList)o : new ArrayList();	}	private void addPartsAddChildList(String s, Modchu_ModelRenderer modelRenderer) {		ArrayList list = getPartsAddChildLiat(modelRenderer);		if (!list.contains(s)) {			list.add(s);			modelRenderer.setFreeVariable("partsAddChildList", list);		}	}	public void newMainModelInit() {		Modchu_Debug.cDebug("newMainModelInit mainModeltextureName="+mainModeltextureName);		if (mainModeltextureName != null) ;else return;		Object[] o = ModchuModel_Main.modelNewInstance(null, mainModeltextureName, true, false);		if (o != null				&& o[0] != null) {			mainModel = (Object) o[0];			isLMMModel = !Modchu_ModelMultiReplacePoint.class.isInstance(mainModel);		}		Modchu_Debug.mlDebug1("newMainModelInit mainModel != null ?"+(mainModel != null)+" getClass()="+(mainModel != null ? mainModel.getClass() : null));	}	private void colorSetting(ModchuModel_IModelCaps entityCaps, int color) {		if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel colorSetting");		Object entity = baseModel.getCapsValue(entityCaps, entityCaps.caps_Entity);		tempColor = color;		int armorType = getArmorType();		String mapKey = cfgName +"," + color +"," + armorType;		mainModeltexture = getTexture(entityCaps, entity, mainModeltextureName, color);		if (mainModeltexture != null) ;else {			mainModeltexture = getTexture(entityCaps, entity, mainModeltextureName, mainModelDesignationColor);			if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel colorSetting mainModelDesignationColor get mainModeltexture="+mainModeltexture+" mainModelDesignationColor="+mainModelDesignationColor);		}		if (textureListMap.containsKey(mapKey)) {			textureAndModelRendererList = textureListMap.get(mapKey);			//Modchu_Debug.mDebug("textureListMap.get ["+mapKey+"]="+(textureList.get(0)));		} else {			ArrayList<Object[]> tempTextureAndModelRendererList = new ArrayList();			if (partsMap != null					&& !partsMap.isEmpty()) {				int i = 0;				int partsTextureColor;				for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {					String key = en.getKey();					Modchu_ModelRenderer modelRenderer = en.getValue();					partsTextureColor = Modchu_CastHelper.Int(modelRenderer.getFreeVariable("partsTextureColor"));					String s1 = Modchu_CastHelper.String(modelRenderer.getFreeVariable("textureName"));					if (s1 != null) {						int i2 = s1.indexOf(';');						if (i2 > -1) s1 = s1.substring(0, i2);						Object s2 =  baseModel.getCapsValue(entityCaps, baseModel.caps_texture, s1, partsTextureColor == -1 ? color : (int) partsTextureColor);						//Modchu_Debug.mDebug("ModchuModel_CustomModel colorSetting add "+s1+" color="+(partsTextureColor == -1 ? color : (int) partsTextureColor)+" texture="+s2);						partsTextureAndModelRendererListAdd(tempTextureAndModelRendererList, modelRenderer, s2);					}					i++;				}				if (!tempTextureAndModelRendererList.isEmpty()) {					textureListMap.put(mapKey, tempTextureAndModelRendererList);					//Modchu_Debug.mDebug("textureListMap.put ["+mapKey+"]="+(tempTextureList.get(0)));				}				textureAndModelRendererList = tempTextureAndModelRendererList;			}		}		if (debug) Modchu_Debug.mlDebug1("ModchuModel_CustomModel colorSetting mainModeltextureName="+mainModeltextureName+" color="+color+" mainModeltexture="+mainModeltexture);	}	private void allShowModelSetting(boolean b) {		Object model = getModel();		Modchu_ModelRenderer modelRenderer;		for (int i = 0; i < modelRendererFieldsMap.size(); i++) {			try {				modelRenderer = (Modchu_ModelRenderer) modelRendererFieldsMap.get(i).get(model);				if (modelRenderer != null) {					if (b) b = showModelMemoryMapGet(modelRenderer);					((Modchu_ModelRenderer) modelRendererFieldsMap.get(i).get(model)).showModel = b;					//Modchu_Debug.mDebug("allShowModelSetting modelRendererFieldsMap.get("+i+").getName() = "+modelRendererFieldsMap.get(i).getName()+" b="+b);				}			} catch (Exception e) {				e.printStackTrace();			}		}	}	private void customModelShowModelSetting(ModchuModel_IModelCaps entityCaps, List<Modchu_ModelRenderer> list, boolean b) {		if (partsMap != null				&& !partsMap.isEmpty()) {			int i = 0;			boolean b1;			for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {				String key = en.getKey();				Modchu_ModelRenderer modelRenderer = en.getValue();				b1 = false;				if (b) b = !getCustomModelShowModelMemoryMap().isEmpty() ? customModelShowModelMemoryMapGet(modelRenderer) : true;				if (list != null						&& !list.isEmpty()) {					for(Modchu_ModelRenderer tempModelRenderer : list) {						if (tempModelRenderer.equals(modelRenderer)) {							b1 = b;							break;						}					}				} else {					b1 = b;				}				//Modchu_Debug.cDebug("customModelShowModelSetting "+partsTextureNameMap.get(i)+" customModelshowModelMemoryListGet(parts["+i+"])="+(customModelshowModelMemoryListGet(modelRenderer))+" s="+s+" b="+b+" b1="+b1);				modelRenderer.showModel = b1;				i++;			}		}	}	private void customModelShowModelSetting(ModchuModel_IModelCaps entityCaps, Modchu_ModelRenderer modelRenderer, boolean b) {		if (modelRenderer != null) {			boolean b1 = false;			if (b) {				b1 = ModchuModel_ModelCapsHelper.getCapsValueInt(entityCaps, entityCaps.caps_showModelSettingBoolean, modelRenderer, ModchuModel_ModelCapsHelper.getCapsValueInt(baseModel, baseModel.caps_armorType)) != 0 ? true : false;				//Modchu_Debug.mDebug("ModchuModel_CustomModel customModelShowModelSetting 1 b1="+b1);			}			//Modchu_Debug.mDebug("ModchuModel_CustomModel customModelShowModelSetting b="+b);			modelRenderer.showModel = b1;			//Modchu_Debug.mDebug("ModchuModel_CustomModel customModelShowModelSetting b1="+b1);		}	}	public int showArmorParts(ModchuModel_IModelCaps entityCaps, int i, int i2) {		if (entityCaps != null) ;else {			baseModel.setCapsValue(baseModel.caps_armorType, i == 1 ? 2 : 1);		}		showArmorPartsNumber = i;		Object model = getModel();		return model != null				&& !(model instanceof MultiModelCustom) ?						Modchu_CastHelper.Int(model != null ? Modchu_Reflect.invokeMethod(model.getClass(), "showArmorParts", new Class[]{ int.class, int.class }, model, new Object[]{ i, i2 }) : -1) :							model instanceof MultiModelCustom ? -2 : -1;	}	public String getUsingTexture() {		return null;	}	public void defaultSkirtFloatsAddChild() {		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelSkirtFloats) {			if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superDefaultSkirtFloatsAddChild();			else ((MultiModelSkirtFloats) model).defaultSkirtFloatsAddChild();		}	}	public void defaultAddChild() {		Object model = getModel();		clearAllAddChild();		if (model != null) {			if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superDefaultAddChild();			else if (model instanceof MultiModelBaseBiped) ((MultiModelBaseBiped) model).defaultAddChild();		}		defaultCustomAddChild();	}	private void clearAllAddChild() {		boolean b1;		for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {			String key = en.getKey();			Modchu_ModelRenderer modelRenderer = en.getValue();			modelRenderer.clearChildModels();			modelRenderer.clearBoneChildModels();			modelRenderer.clearBoneSpecialChildModels();;		}	}	private void defaultCustomAddChild() {		Modchu_Debug.cDebug("defaultCustomAddChild");		boolean b1;		ArrayList<String> list;		Modchu_Debug.cDebug("defaultCustomAddChild partsMap.size()="+partsMap.size());		for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {			String key = en.getKey();			Modchu_ModelRenderer modelRenderer = en.getValue();			list = getPartsAddChildLiat(modelRenderer);			Modchu_Debug.cDebug("defaultCustomAddChild name="+key);			Modchu_Debug.cDebug("defaultCustomAddChild boxName="+modelRenderer.getBoxName());			Modchu_Debug.cDebug("defaultCustomAddChild list.size()="+list.size());			if (list != null					&& !list.isEmpty()) {				for (String s1 : list) {					partsAddChildSetting(s1, modelRenderer);				}			}		}	}	public void actionPartsAddChild() {		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superActionPartsAddChild();		else if (model instanceof MultiModelAction) ((MultiModelAction) model).actionPartsAddChild();	}	public void boneProcessing(float f, float f1, float f2, float f3, float f4, float f5, ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model != null) ;else return;		if (model instanceof MultiModelCustom) ((MultiModelCustom) model).superBoneProcessing(f, f1, f2, f3, f4, f5, entityCaps);		else if (model instanceof MultiModelAction) ((MultiModelAction) model).boneProcessing(f, f1, f2, f3, f4, f5, entityCaps);	}	public Object getModel() {		return mainModel != null ? mainModel : baseModel;	}	private String obfuscationNameCheck(String s) {/*		if (!Modchu_Main.isRelease()				| Modchu_Main.isForge) return s;		String[] s1 = {				"bipedHead", "bipedHeadwear", "bipedBody",				"bipedRightArm", "bipedLeftArm", "bipedRightLeg", "bipedLeftLeg", "bipedCloak",				"bipedEars"		};		String[] s2 = {				"c", "d", "e",				"f", "g", "h", "i", "j",				"k"		};		for(int i = 0; i < s1.length; i++) {			if (s.equalsIgnoreCase(s1[i])) return s2[i];		}*/		return s;	}	public static String getPartsTypeString(byte by) {		String s = null;		switch (by) {		case 0:			s = "normal";			break;		case 1:			s = "eyeR";			break;		case 2:			s = "eyeL";			break;		case 3:			s = "ear";			break;		case 4:			s = "tail";			break;		}		return s;	}	private Class getIModelCapsClass() {		return isLMMModel ? Modchu_Reflect.loadClass("MMM_IModelCaps") : ModchuModel_IModelCaps.class;	}	private int getArmorType() {		float[] f = getArmorModelsSize();		//Modchu_Debug.mlDebug("getArmorType() modelSize="+((MultiModelCustom) baseModel).modelSize+" f[0]="+f[0]+" f[1]="+f[1]);		return ((MultiModelCustom) baseModel).modelSize == f[0] ? 1 : ((MultiModelCustom) baseModel).modelSize == f[1] ? 2 : 0;		//return Modchu_CastHelper.Int(((MultiModelCustom) baseModel).getCapsValue(baseModel.caps_armorType));		//return ModchuModel_ModelCapsHelper.getCapsValueInt(baseModel, baseModel.caps_armorType);	}	private boolean getIsRendering(ModchuModel_IModelCaps entityCaps, int i) {		Object entity = baseModel.getCapsValue(entityCaps, entityCaps.caps_Entity);		if (ModchuModel_ModelCapsHelper.getCapsValueByte(entityCaps, entityCaps.caps_EntityType) == entityCaps.entityType_LMM) {			boolean isInvisible = Modchu_AS.getBoolean(Modchu_AS.entityIsInvisible, entity);			if (i == 0					&& (!ModchuModel_ConfigData.useInvisibilityBody					| (ModchuModel_ConfigData.useInvisibilityBody					&& !isInvisible))) return true;			if (i > 0					&& (!ModchuModel_ConfigData.useInvisibilityArmor					| (ModchuModel_ConfigData.useInvisibilityArmor					&& !isInvisible))) return true;			return false;		}		return allRendering ? true : ModchuModel_ModelCapsHelper.getCapsValueBoolean(entityCaps, entityCaps.caps_isRendering);	}	private Object getTexture(ModchuModel_IModelCaps entityCaps, Object entity, String s, int i) {		int armorType = getArmorType();		String mapKey = cfgName +","+ s +"," + i +"," + armorType;		if (mainTextureMap.containsKey(mapKey)) return mainTextureMap.get(mapKey);		Object s1 = armorType < 1 ?				baseModel.getCapsValue(entityCaps, baseModel.caps_texture, s, i) :					baseModel.getCapsValue(entityCaps, baseModel.caps_armorTexture, s, armorType == 1 ? 64 : 80);		if (debug) Modchu_Debug.mlDebug1("getTexture s="+s+" i="+i+" armorType="+armorType+" s1="+s1);		if (s1 != null) mainTextureMap.put(mapKey, s1);		return s1;	}	private int getMaidColor(ModchuModel_IModelCaps entityCaps) {		Object entity = entityCaps.getCapsValue(entityCaps.caps_Entity);		Object o = null;		Object currentScreen = Modchu_AS.get(Modchu_AS.minecraftCurrentScreen);		if (guiTextureSelectFlag) {			if (tempSelectPanel != null) {				if (tempGuiEntitySelectEntity != null) ;else tempGuiEntitySelectEntity = Modchu_Reflect.getFieldObject("MMM_GuiTextureSlot", "entity", tempSelectPanel);				if (tempGuiEntitySelectEntity != null) {					allRendering = true;					o = Modchu_Reflect.invokeMethod("MMM_EntitySelect", "getColor", tempGuiEntitySelectEntity);					//Modchu_Debug.Debug("getMaidColor MMM_GuiTextureSelect o="+o);				}			}		} else if (ModchuModel_ModelCapsHelper.getCapsValueByte(entityCaps, entityCaps.caps_EntityType) == entityCaps.entityType_LMM) {			if (Modchu_Reflect.loadClass("LMM_EntityLittleMaid").isInstance(entity)) {				if (Modchu_Main.getMinecraftVersion() > 159) {					Object textureData = Modchu_Reflect.getFieldObject("LMM_EntityLittleMaid", "textureData", entity);					if (textureData != null) o = Modchu_Reflect.invokeMethod("MMM_TextureData", "getColor", textureData);				} else{					if (Modchu_Main.getMinecraftVersion() < 160) o = Modchu_Reflect.getFieldObject("LMM_EntityLittleMaid", "maidColor", entity);				}			}			//allRendering = true;			//Modchu_Debug.Debug("getMaidColor mod_LMM_littleMaidMob");		} else {			//Modchu_Debug.Debug("getMaidColor !LMM ?"+(entity.getClass()));			o = ModchuModel_ModelCapsHelper.getCapsValueInt(baseModel, entityCaps, baseModel.caps_maidColor, entity);		}		if (o != null) {			//Modchu_Debug.Debug("getMaidColor o="+o);			return Modchu_CastHelper.Int(o);		}		return 0;	}	private HashMap<Modchu_ModelRenderer, Boolean> getShowModelMemoryMap() {		return showModelMemoryMap;	}	private boolean showModelMemoryMapGet(Modchu_ModelRenderer modelRenderer) {		return showModelMemoryMap.containsKey(modelRenderer) ? showModelMemoryMap.get(modelRenderer) : false;	}	private void showModelMemoryMapPut(Modchu_ModelRenderer modelRenderer, boolean b) {		showModelMemoryMap.put(modelRenderer, b);	}	private HashMap<Modchu_ModelRenderer, Boolean> getCustomModelShowModelMemoryMap() {		return customModelShowModelMemoryMap;	}	private boolean customModelShowModelMemoryMapGet(Modchu_ModelRenderer modelRenderer) {		return customModelShowModelMemoryMap.containsKey(modelRenderer) ? customModelShowModelMemoryMap.get(modelRenderer) : false;	}	private void customModelShowModelMemoryMapPut(Modchu_ModelRenderer modelRenderer, boolean b) {		if (debug				&& memoryDebug) Modchu_Debug.mDebug("ModchuModel_CustomModel customModelShowModelMemoryMapPut modelRenderer="+modelRenderer);		customModelShowModelMemoryMap.put(modelRenderer, b);	}	public Modchu_ModelRenderer getBipedHead(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).bipedHead;		if (model instanceof MultiModelBaseBiped) return ((MultiModelBaseBiped) model).bipedHead;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), "bipedHead", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), "field_78116_c", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getDominantArm(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		int i = ModchuModel_ModelCapsHelper.getCapsValueInt(entityCaps, entityCaps.caps_dominantArm, entityCaps.getCapsValue(entityCaps.caps_armorType));		if (model instanceof MultiModelCustom) return i == 0 ? ((MultiModelCustom) model).bipedRightArm : ((MultiModelCustom) model).bipedLeftArm;		if (model instanceof MultiModelBaseBiped) return i == 0 ? ((MultiModelBaseBiped) model).bipedRightArm : ((MultiModelBaseBiped) model).bipedLeftArm;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), i == 0 ? "bipedRightArm" : "bipedLeftArm", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), i == 0 ? "field_78112_f" : "field_78113_g", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getBipedRightArm(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).bipedRightArm;		if (model instanceof MultiModelBaseBiped) return ((MultiModelBaseBiped) model).bipedRightArm;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), "bipedRightArm", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), "field_78112_f", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getBipedLeftArm(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).bipedLeftArm;		if (model instanceof MultiModelBaseBiped) return ((MultiModelBaseBiped) model).bipedLeftArm;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), "bipedLeftArm", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), "field_78113_g", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getBipedRightLeg(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).bipedRightLeg;		if (model instanceof MultiModelBaseBiped) return ((MultiModelBaseBiped) model).bipedRightLeg;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), "bipedRightLeg", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), "field_78123_h", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getBipedLeftLeg(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		if (model instanceof MultiModelCustom) return ((MultiModelCustom) model).bipedLeftLeg;		if (model instanceof MultiModelBaseBiped) return ((MultiModelBaseBiped) model).bipedLeftLeg;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), "bipedLeftLeg", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), "field_78124_i", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public Modchu_ModelRenderer getNotDominantArm(ModchuModel_IModelCaps entityCaps) {		Object model = getModel();		int i = ModchuModel_ModelCapsHelper.getCapsValueInt(entityCaps, entityCaps.caps_dominantArm, entityCaps.getCapsValue(entityCaps.caps_armorType));		if (model instanceof MultiModelCustom) return i == 0 ? ((MultiModelCustom) model).bipedLeftArm : ((MultiModelCustom) model).bipedRightArm;		if (model instanceof MultiModelBaseBiped) return i == 0 ? ((MultiModelBaseBiped) model).bipedLeftArm : ((MultiModelBaseBiped) model).bipedRightArm;		Object o = Modchu_Reflect.getFieldObject(model.getClass(), i == 0 ? "bipedLeftArm" : "bipedRightArm", model);		if (o != null) ;else o = Modchu_Reflect.getFieldObject(model.getClass(), i == 0 ? "field_78113_g" : "field_78112_f", model);		return o != null				&& o instanceof Modchu_ModelRenderer ? (Modchu_ModelRenderer) o : null;	}	public void showAllParts(ModchuModel_IModelCaps entityCaps) {/*		Object model = getModel();		if (model instanceof MultiModelCustom) {			((MultiModelCustom) model).superShowAllParts(entityCaps);		}		if (model instanceof MultiModelBaseBiped) ((MultiModelBaseBiped) model).showAllParts(entityCaps);		boolean b = ModchuModel_ModelCapsHelper.getCapsValueInt(model, entityCaps.caps_armorType) == 0;		for (Entry<String, Modchu_ModelRenderer> en : partsMap.entrySet()) {			Modchu_ModelRenderer o = en.getValue();			o.showModel = b;			customModelShowModelMemoryMapPut(o, o.showModel);		}*/	}	private Object getModelCaps(ModchuModel_IModelCaps entityCaps) {		if (!isLMMModel) return entityCaps;		if (ModchuModel_ModelCapsHelper.getCapsValueByte(entityCaps, entityCaps.caps_EntityType) == entityCaps.entityType_LMM) {			return entityCaps.getCapsValue(entityCaps.caps_subEntityCaps);		}		if (ModchuModel_ModelCapsHelper.getCapsValueByte(entityCaps, entityCaps.caps_EntityType) == entityCaps.entityType_PFLM) {			return ModchuModel_ModelDataMaster.instance.getLMMCaps(entityCaps);		}		return entityCaps;	}	private Object[] capsObjectCheck(Object[] pArg) {		if (!isLMMModel) return pArg;		if (pArg != null) ;else return pArg;		for (int i = 0; i < pArg.length; i++) {			if (pArg[i] instanceof ModchuModel_IModelCaps) pArg[i] = getModelCaps((ModchuModel_IModelCaps) pArg[i]);		}		return pArg;	}}